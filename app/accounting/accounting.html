<spinner-content [isRunning]="isRequesting"></spinner-content>
<div class="container" [hidden]="isRequesting">
    <!--div class="block-header">
        <h2>Estado de cuentas</h2>
    </div-->
    <div class="card">
        <div class="card-header">
            <h2>
                {{subtitle}}
                <small>{{description_subtitle}}</small>
            </h2>
        </div>

        <div class="card-padding card-header">
            <div class="row">
                <div class="col-sm-3">
                    <div class="input-group form-group">
                        <span class="input-group-addon"><i class="md md-event"></i></span>
                        <div class="dtp-container dropdown fg-line">
                            <input id="dateStart" type='text' class="form-control date-picker" data-toggle="dropdown" placeholder="Desde">
                        </div>
                    </div>
                </div>

                <div class="col-sm-3">
                    <div class="input-group form-group">
                        <span class="input-group-addon"><i class="md md-event"></i></span>
                        <div class="dtp-container dropdown fg-line">
                            <input id="dateEnd" type='text' class="form-control date-picker" data-toggle="dropdown" placeholder="Hasta">
                        </div>
                    </div>
                </div>

                <div class="col-sm-4">
                    <div class="input-group form-group">
                        <span class="input-group-addon"><i class="md md-search"></i></span>
                        <div class="dtp-container dropdown fg-line">
                            <input id="query" type='text' class="form-control" placeholder="Nombre o DNI" (keyup.enter)="getAccountingByClinic('all')">
                        </div>
                    </div>
                </div>

                <div class="col-sm-2">
                    <div class="input-group form-group">
                        <button class="btn btn-info" (click)="getAccountingByClinic('all')" ><i class="md md-search"></i>Buscar</button>
                    </div>
                </div>

            </div>
        </div>

        <div class="text-center" [hidden]="response.Total > 0">
            <i class="md md-settings-ethernet" style="font-size: 100px;"></i>
            <div>No hay elementos para mostrar</div>
        </div>

        <div class="table-responsive" [hidden]="!(response.Total > 0)">
            <table class="table table-striped" [mfData]="response.Data" #mf="mfDataTable" [mfRowsOnPage]="10">
                <thead>
                    <tr>
                        <th style="width: 65%">
                            <mfDefaultSorter by="name">Nombre</mfDefaultSorter>
                        </th>
                        <th style="width: 10%">
                            <mfDefaultSorter by="total">Presupuestado</mfDefaultSorter>
                        </th>
                        <th style="width: 10%">
                            <mfDefaultSorter by="total">Pagado</mfDefaultSorter>
                        </th>
                        <th style="width: 10%">
                            <mfDefaultSorter by="total">Pendiente</mfDefaultSorter>
                        </th>
                        <th style="width: 5%">
                            <mfDefaultSorter by="action"></mfDefaultSorter>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of mf.data">
                        <td>{{item.Name}} {{item.LastNames}}</td>
                        <td>{{item.TreatmentAmount}}</td>
                        <td>{{item.Payment}}</td>
                        <td>{{item.Owed}}</td>
                        <td>
                            <!--ul class="actions">
                                <li class="dropdown">
                                    <a [routerLink]="['/accounting', item.Id, 'EXECUTE']">
                                        <i class="md md-trending-up"></i>
                                    </a>
                                </li>
                            </ul-->
                        </td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="4">
                            <mfBootstrapPaginator [rowsOnPageSet]="[10,25,50]"></mfBootstrapPaginator>
                        </td>
                    </tr>
                    <tr>
                        <td><h4><u>Total</u></h4></td>
                        <td><h4><u>{{totalAmount}}</u></h4></td>
                        <td><h4><u>{{totalPayment}}</u></h4></td>
                        <td><h4><u>{{totalOwed}}</u></h4></td>
                        <td></td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</div>
